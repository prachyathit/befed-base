<% provide(:title, 'Log in') %>
<% provide(:hidden_title, 'Log in') %>
<div class='container'>
    <div class="row default-background">
      <div class="pad-col col-md-6">
        <div class="form-container">
          <div class='sign-up-title'>
            Create New Account<br>
            <span class='subthai'>ลงทะเบียนกับเรา</span><br>
          </div>
          
          <%= form_for(:user, url: users_path) do |f| %>
            <% if @user %>
              <%= render 'shared/error_messages' %>
            <% end %>
  
            <%= f.text_field :name, class: 'form-control', placeholder: 'Name' %>
  
            <%= f.email_field :email, class: 'form-control', placeholder: 'Email' %>
  
            <%= f.text_field :phone, class: 'form-control', placeholder: 'Phone Number' %>
            
            <% address_nil = session[:saddress].nil? %>
            
            <% unless address_nil %>
              <% address_empty = session[:saddress].empty? %>
            <% else %>
              <% address_empty = true %>
            <% end %>
            
            <% if address_empty %>
              
              <%= link_to "#", { :class => "showmap" } do %>
                <div class="edit-address btn btn-default text-color margin-bot-15">Enter Delivery Location</div>
              <% end %>
              
            <% else %>
              
              <%= f.hidden_field :raw_address, value: session[:saddress]["raw"] %>       
              <%= f.hidden_field :address, value: session[:saddress]["faddress"] %>
              <%= f.hidden_field :latitude, value: session[:saddress]["latitude"] %>
              <%= f.hidden_field :longitude, value: session[:saddress]["longitude"] %>
            
            <% end %>
  
            <%= f.password_field :password, class: 'form-control', placeholder: 'Password (minimum 6 characters)' %>
  
            <%= f.password_field :password_confirmation, class: 'form-control', placeholder: 'Password Confirmation' %>
  
            <button type='submit' class='btn form-btn form-control'><i class="fa fa-user btn-icon fa-sm"></i>Register</button>
          <% end %>
          <span class= 'subred'>*Register today to get <strong>FREE DELIVERY</strong> on your first order!</span>
        </div>
      </div>
      <%= render partial: "shared/map_modal", 
      locals: { 
        button_name: "Find Restaurants",
        return_url: '',
        submit_url: login_path,
        cancel_url: login_path
      } %>
      
      <div class="pad-col col-md-6">
        <div class="form-container">
          <div class='sign-in-title'>
            Already Registered?<br>
            <span class='subthai'>เข้าสู่ระบบ</span>
          </div>
          <%= form_for(:session, url: login_path) do |f| %>
            <%= f.email_field :email, class: 'form-control', placeholder: 'Email' %>
  
            <%= f.password_field :password, class: 'form-control', placeholder: 'Password'  %>
  
            <button type='submit' class='btn form-btn form-control green_success'><i class="fa fa-lock btn-icon fa-sm"></i>Log In</button>
            <p id='password-link'>Forgot password? <span id='forgot-password'><a href='/password_resets/new'>Click to reset your password</a></span><p>
          <% end %>
        </div>

      </div>      
      
    </div>
</div>
